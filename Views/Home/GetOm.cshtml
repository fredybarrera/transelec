@{
    ViewData["Title"] = $"OM: {ViewBag.Om}";
}

<div class="card mt-3">
    <div class="card-header card-header h4 text-center">
        OM @ViewBag.Om
    </div>
    <div class="card-body">
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table id="recordsTableIndex" class="table table-striped table-bordered" style="width:100%">
                        <thead>
                            <tr>
                                @* 
                                <th>Object ID</th>
                                <th>uniquerowid</th>
                                <th>Global ID</th> 
                                <th>OM</th>
                                *@
                                <th>Actividad</th>
                                <th>Tipo de Trabajo</th>
                                <th>Equipo</th>
                                <th>Zona</th>
                                <th>Instalación</th>
                                <th>Organización</th>
                                <th>Jefe faena</th>
                                <th>Jefe de actividad</th>
@*                                 <th>Aceptar</th>
                                <th>Estado</th>
                                <th>Observación</th> *@
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    @*    
                                    <td>@item["objectid"]</td>
                                    <td>@item["uniquerowid"]</td>
                                    <td>@item["globalid"]</td> 
                                    <td>@item["om_text"]</td>
                                    *@
                                    <td>@item["actividad"]</td>
                                    <td>@item["tipo_trabaj"]</td>
                                    <td>@item["equipo"]</td>
                                    <td>@item["zona_name"]</td>
                                    <td>@item["instalac"]</td>
                                    <td>@item["organizac"]</td>
                                    <td>@item["jefe_faen"]</td>
                                    <td>@item["jefe_act"]</td>
@*                                     <td>@item["aceptar"]</td>
                                    <td>@item["estado"]</td>
                                    <td>@item["obs_activ"]</td> *@
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer">
                <div class="form-group mt-2 mb-2" style="float: right;">
                    <button type="button" id="btn-rechazar-om" data-objectid="@ViewBag.Objectid" class="btn btn-secondary"><em class="ion ion-ios-close-circle"></em>&nbsp; Rechazar</button>
                    <button type="button" onclick="aprobarOm('@ViewBag.Objectid')" class="btn btn-success"><em class="ion ion-ios-checkmark-circle"></em>&nbsp; Aprobar</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="modal-rechazar" tabindex="-1" aria-labelledby="modal-liberarLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Rechazar OM</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">Observación<span class="requerido">*</span></label>
                    <textarea class="form-control" id="Observacion" maxlength="124"></textarea>
                    <input type="hidden" id="Objectid" />
                </div>
                <div id="statusMessage" class="mt-2"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="rechazarOm()">Guardar</button>
            </div>
        </div>
    </div>
</div>